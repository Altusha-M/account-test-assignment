<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Transaction</title>
</head>
<body>

<h1>Bank account app</h1>

<div>
    <a href="/api/account">Get all accounts</a>
    <a href=create_account.html>Create new account</a>
</div>

<div>
    <form action="/api/account" method="patch">
        <script>
            let form = document.createElement('form');
            form.innerHTML = 'Account number:<input id="acc_number" name="number" placeholder="Enter account number"><br>' +
                'amount of money:<input id="amount" name="value" placeholder="Enter amount of money"><br>' +
                '<button id="add_money" name="credit" value="ADD">ADD MONEY</button><br>'+
                '<button id="remove_money" name="debit" value="REMOVE">REMOVE MONEY</button>';
            document.body.append(form);
            document.getElementById("add_money").onclick = function () {
                let xhr = new XMLHttpRequest();
                xhr.open("PATCH", "api/account"+"/"+document.getElementById("acc_number").value
                    + "/credit/"+document.getElementById("amount").value, true);
                // xhr.setRequestHeader("Content-type", "application/json");
                // xhr.send(JSON.stringify({
                //     amount: document.getElementById("amount").value
                // }));
                xhr.send();
                alert("sent");
            };
            document.getElementById("remove_money").onclick = function () {
                let xhr = new XMLHttpRequest();
                xhr.open("PATCH", "api/account"+"/"+document.getElementById("acc_number").value
                    + "/debit/"+document.getElementById("amount").value, true);
                // xhr.setRequestHeader("Content-type", "application/json");
                // xhr.send(JSON.stringify({
                //     amount: document.getElementById("amount").value
                // }));
                xhr.send();
                alert("sent");
            };
        </script>
    </form>
</div>

</body>
</html>